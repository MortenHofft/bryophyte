import { css } from 'emotion';
import React from "react";
import {
  useMenuState,
  Menu as BaseMenu,
  MenuItem,
  MenuDisclosure
} from "reakit/Menu";

import Button from '../Button/Button';
import Switch from '../Switch/Switch';

function Menu({ trigger, items, ...props }) {
  const menu = useMenuState({ placement: 'bottom-end' });
  return (
    <>
      <MenuDisclosure {...menu} {...trigger.props}>
        {disclosureProps => React.cloneElement(trigger, disclosureProps)}
      </MenuDisclosure>
      <BaseMenu {...menu} {...props}>
        <div className={menuContainer}>
          {items.map((item, i) => (
            <MenuItem {...menu} {...item.props} key={i}>
              {itemProps => React.cloneElement(item, itemProps)}
            </MenuItem>
          ))}
        </div>
      </BaseMenu>
    </>
  );
}


function Example() {
  return (
    <Menu
      aria-label="Custom menu"
      trigger={<Button style={{marginLeft: 200}}>Custom menu</Button>}
      items={[
        <div>Custom item 1<input type="checkbox"></input></div>,
        <span className={menuContainer}>sdf</span>,
        <label className={menuOption}>
          Show help texts
          <Switch />
        </label>,
        <button>Custom item 2</button>,
        <button>Custom item 3</button>
      ]}
    />
  );
}

const menuOption = css`
  background: tomato;
`;

const menuContainer = css`
  background-color: rgb(255, 255, 255);
  z-index: 999;
  border-radius: 4px;
  outline: 0px;
  border: 1px solid rgba(33, 33, 33, 0.25);
  /* box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 1000px 1000px; */
  &:focus {
    outline: none;
    box-shadow: 0 0 0 0.125em rgba(50, 115, 220, 0.25);
  }
`;

export default Example;